import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

type BotMessageSeed = {
  key: string;
  category: string;
  text: string;
  description?: string;
};

/**
 * –°–∏–¥ —Ç–æ–ª—å–∫–æ –¥–ª—è bot_messages:
 * - –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–ª—é—á–∏
 * - –ù–ï –∑–∞—Ç–∏—Ä–∞–µ—Ç —Ç–µ–∫—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –≤ –∞–¥–º–∏–Ω–∫–µ
 */
const MESSAGES: BotMessageSeed[] = [
  {
    key: 'post_intro_offer',
    category: 'subscription',
    text:
      '–¢—ã –ø—Ä–æ—à—ë–ª –≤–≤–æ–¥–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π.\n\n–î–æ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ —É —Ç–µ–±—è –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–æ —Å–∫–∏–¥–∫–æ–π:\n' +
      '- 1 –º–µ—Å—è—Ü: <b>299‚ÇΩ</b> –≤–º–µ—Å—Ç–æ 399‚ÇΩ\n' +
      '- 80 –¥–Ω–µ–π: <b>799‚ÇΩ</b> –≤–º–µ—Å—Ç–æ 999‚ÇΩ\n\n' +
      '–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–∂–µ—à—å –Ω–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥.',
    description: '–û—Ñ—Ñ–µ—Ä —Å–æ —Å–∫–∏–¥–∫–æ–π –ø–æ—Å–ª–µ –∏–Ω—Ç—Ä–æ (–¥–æ —Å—Ç–∞—Ä—Ç–∞ —Ç—Ä–∏–∞–ª–∞)',
  },
  {
    key: 'gift_card',
    category: 'subscription',
    text:
      'üéÅ <b>–ü–æ–¥–∞—Ä–æ–∫: –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ {duration}</b>\n\n' +
      '–≠—Ç–æ –Ω–µ–±–æ–ª—å—à–æ–π ¬´—Å–¥–≤–∏–≥ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏¬ª ‚Äî –∑–Ω–∞–∫ –∑–∞–±–æ—Ç—ã –±–µ–∑ –ª–∏—à–Ω–µ–π –≤–∞–∂–Ω–æ—Å—Ç–∏.\n\n' +
      '<b>–ö–∞–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</b>:\n' +
      '1) –û—Ç–∫—Ä–æ–π: <a href="{link}">–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∞—Ä–æ–∫</a>\n' +
      '2) –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å –±–æ—Ç—É: <code>{start_cmd}</code>\n\n' +
      '<i>–ü–æ–¥–∞—Ä–æ–∫ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π ‚Äî –ø–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å—Å—ã–ª–∫–∞ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å.</i>',
    description: '–¢–µ–∫—Å—Ç ‚Äú–ø–æ–¥–∞—Ä–æ—á–Ω–æ–π –æ—Ç–∫—Ä—ã—Ç–∫–∏‚Äù (HTML). –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã: {duration} {days} {link} {start_cmd}',
  },
  {
    key: 'gift_share_text',
    category: 'subscription',
    text:
      'üéÅ –ü–æ–¥–∞—Ä–æ–∫: –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ {duration}\n\n' +
      '–ù–∞–∂–º–∏ ¬´–°—Ç–∞—Ä—Ç¬ª –ø–æ —Å—Å—ã–ª–∫–µ, —á—Ç–æ–±—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:\n{link}\n\n' +
      '–ï—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚Äî –æ—Ç–ø—Ä–∞–≤—å –±–æ—Ç—É:\n{start_cmd}\n\n' +
      '–ü–æ–¥–∞—Ä–æ–∫ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π.',
    description: '–¢–µ–∫—Å—Ç –¥–ª—è –∫–Ω–æ–ø–∫–∏ ‚Äú–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥—Ä—É–≥—É‚Äù (plain text). –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã: {duration} {days} {link} {start_cmd}',
  },
  {
    key: 'unknown_message',
    category: 'general',
    text: '–Ø –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª, —á—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å.\n\n–ß—Ç–æ–±—ã –æ–±—Å—É–¥–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –∏–ª–∏ –ø—Ä–∏–Ω—Ü–∏–ø ‚Äî –æ—Ç–∫—Ä–æ–π /menu –∏ –Ω–∞–∂–º–∏ ¬´üß† –û–±—Å—É–¥–∏—Ç—å¬ª.',
    description: '–û—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ–≥–¥–∞ –±–æ—Ç –Ω–µ –æ–∂–∏–¥–∞–µ—Ç –≤–≤–æ–¥–∞',
  },
];

async function main() {
  console.log('üå± Seed messages: start');

  for (const msg of MESSAGES) {
    await prisma.botMessage.upsert({
      where: { key: msg.key },
      // –í–∞–∂–Ω–æ: –ù–ï —Ç—Ä–æ–≥–∞–µ–º text, –µ—Å–ª–∏ –∫–ª—é—á —É–∂–µ –µ—Å—Ç—å (–∞–¥–º–∏–Ω–∫–∞ –º–æ–≥–ª–∞ –º–µ–Ω—è—Ç—å —Ç–µ–∫—Å—Ç)
      update: {
        category: msg.category,
        description: msg.description,
      },
      create: msg,
    });
  }

  console.log(`‚úÖ Seed messages: done (${MESSAGES.length} keys ensured)`);
}

main()
  .catch((e) => {
    console.error('‚ùå Seed messages error:', e);
    process.exit(1);
  })
  .finally(async () => {
    await prisma.$disconnect();
  });


